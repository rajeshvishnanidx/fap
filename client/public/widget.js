/*! For license information please see widget.js.LICENSE.txt */
!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("React"),require("ReactDOM"),require("axios")):"function"===typeof define&&define.amd?define(["React","ReactDOM","axios"],t):"object"===typeof exports?exports.ChatWidget=t(require("React"),require("ReactDOM"),require("axios")):e.ChatWidget=t(e.React,e.ReactDOM,e.axios)}(self,((e,t,o)=>(()=>{"use strict";var r={153:(e,t,o)=>{var r=o(883),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,o){var r,i={},p=null,l=null;for(r in void 0!==o&&(p=""+o),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!d.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:n,type:e,key:p,ref:l,props:i,_owner:s.current}}t.jsx=p,t.jsxs=p},391:(e,t,o)=>{var r=o(845);t.H=r.createRoot,r.hydrateRoot},579:(e,t,o)=>{e.exports=o(153)},742:e=>{e.exports=o},845:e=>{e.exports=t},883:t=>{t.exports=e}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};i.r(a),i.d(a,{default:()=>y});var s=i(883),d=i.n(s),p=i(391),l=i(742),u=i.n(l),c=i(579);const x=()=>{const[e,t]=(0,s.useState)(!1),[o,r]=(0,s.useState)(""),[n,i]=(0,s.useState)([]),[a,d]=(0,s.useState)(!1),p=(0,s.useRef)(null),l={container:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,fontFamily:"Arial, sans-serif"},button:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#007bff",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 12px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},chatWindow:{position:"absolute",bottom:"80px",right:"0",width:"350px",height:"500px",backgroundColor:"white",borderRadius:"10px",boxShadow:"0 2px 12px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},header:{padding:"15px",backgroundColor:"#007bff",color:"white",borderTopLeftRadius:"10px",borderTopRightRadius:"10px"},messageContainer:{flex:1,overflow:"auto",padding:"15px"},message:{margin:"8px 0",padding:"8px 12px",borderRadius:"15px",maxWidth:"80%"},userMessage:{backgroundColor:"#007bff",color:"white",marginLeft:"auto"},aiMessage:{backgroundColor:"#f1f1f1",marginRight:"auto"},inputContainer:{padding:"15px",borderTop:"1px solid #eee",display:"flex"},input:{flex:1,padding:"8px 12px",border:"1px solid #ddd",borderRadius:"20px",marginRight:"8px"},sendButton:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"20px",cursor:"pointer"}},x=async()=>{if(!o.trim())return;const e={role:"user",content:o};i((t=>[...t,e])),r(""),d(!0);try{const t=await u().post(`${window.AI_AGENT_CONFIG.apiUrl}/chat/${window.AI_AGENT_CONFIG.agentId}`,{messages:[...n,e]},{headers:{Authorization:`Bearer ${window.AI_AGENT_CONFIG.apiKey}`,"Content-Type":"application/json"}});i((e=>[...e,t.data.message]))}catch(s){var t,a;const e=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Error sending message";i((t=>[...t,{role:"system",content:`\u26a0\ufe0f Error: ${e}`}]))}d(!1)};return(0,s.useEffect)((()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),(0,c.jsxs)("div",{style:l.container,children:[e&&(0,c.jsxs)("div",{style:l.chatWindow,children:[(0,c.jsx)("div",{style:l.header,children:"Chat with AI Assistant"}),(0,c.jsxs)("div",{style:l.messageContainer,children:[n.map(((e,t)=>(0,c.jsx)("div",{style:{...l.message,..."user"===e.role?l.userMessage:l.aiMessage},children:e.content},t))),(0,c.jsx)("div",{ref:p})]}),(0,c.jsxs)("div",{style:l.inputContainer,children:[(0,c.jsx)("input",{type:"text",style:l.input,value:o,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&x(),placeholder:"Type your message...",disabled:a}),(0,c.jsx)("button",{style:l.sendButton,onClick:x,disabled:a,children:a?"...":"Send"})]})]}),(0,c.jsx)("button",{style:l.button,onClick:()=>t(!e),children:e?"\xd7":"\ud83d\udcac"})]})},f=()=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",g):g()},g=()=>{const e=document.createElement("div");e.id="ai-chat-widget-root",document.body.appendChild(e);(0,p.H)(e).render((0,c.jsx)(d().StrictMode,{children:(0,c.jsx)(x,{})}))};"undefined"!==typeof window&&(window.ChatWidget={component:x,init:f},f());const y=x;return a})()));
//# sourceMappingURL=widget.js.map